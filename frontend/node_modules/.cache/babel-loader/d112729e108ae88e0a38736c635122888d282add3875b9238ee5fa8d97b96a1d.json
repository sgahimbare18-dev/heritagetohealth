{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/Heritage to Health/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProgramForm=_ref=>{let{program,onSave,onCancel}=_ref;const[formData,setFormData]=useState({title:'',description:'',image:'',published:true});const[uploadingImage,setUploadingImage]=useState(false);useEffect(()=>{if(program){setFormData(program);}},[program]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleCheckboxChange=e=>{const{name,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:checked}));};const uploadFile=async file=>{const formDataUpload=new FormData();formDataUpload.append('file',file);try{const response=await axios.post('http://localhost:5000/api/upload',formDataUpload,{headers:{'Content-Type':'multipart/form-data'}});return response.data.file.url;}catch(error){console.error('Upload failed:',error);alert('Failed to upload file. Please try again.');return null;}};const handleImageChange=async e=>{const file=e.target.files[0];if(file){setUploadingImage(true);const url=await uploadFile(file);if(url){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{image:url}));}setUploadingImage(false);}};const handleSubmit=e=>{e.preventDefault();const programData=_objectSpread(_objectSpread({},formData),{},{id:program?program.id:Date.now().toString()});onSave(programData);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md border\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:program?'Edit Program':'Add New Program'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,required:true,rows:\"4\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Image Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),formData.image&&/*#__PURE__*/_jsx(\"img\",{src:formData.image,alt:\"Preview\",className:\"mt-2 w-16 h-16 rounded-full object-cover\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Optional: Upload an image for the program\"}),uploadingImage&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-600 ml-2\",children:\"Uploading...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Published\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"published\",checked:formData.published,onChange:handleCheckboxChange,className:\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-600\",children:\"Check to publish this program on the website\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:uploadingImage,className:\"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\",children:uploadingImage?'Uploading...':program?'Update Program':'Add Program'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\",children:\"Cancel\"})]})]})]});};export default ProgramForm;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ProgramForm","_ref","program","onSave","onCancel","formData","setFormData","title","description","image","published","uploadingImage","setUploadingImage","handleChange","e","name","value","target","prev","_objectSpread","handleCheckboxChange","checked","uploadFile","file","formDataUpload","FormData","append","response","post","headers","data","url","error","console","alert","handleImageChange","files","handleSubmit","preventDefault","programData","id","Date","now","toString","className","children","onSubmit","type","onChange","required","rows","accept","src","alt","disabled","onClick"],"sources":["C:/Users/Admin/Desktop/Heritage to Health/frontend/src/components/ProgramForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ProgramForm = ({ program, onSave, onCancel }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    image: '',\r\n    published: true\r\n  });\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (program) {\r\n      setFormData(program);\r\n    }\r\n  }, [program]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleCheckboxChange = (e) => {\r\n    const { name, checked } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: checked\r\n    }));\r\n  };\r\n\r\n  const uploadFile = async (file) => {\r\n    const formDataUpload = new FormData();\r\n    formDataUpload.append('file', file);\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/upload', formDataUpload, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      return response.data.file.url;\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      alert('Failed to upload file. Please try again.');\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleImageChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setUploadingImage(true);\r\n      const url = await uploadFile(file);\r\n      if (url) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          image: url\r\n        }));\r\n      }\r\n      setUploadingImage(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const programData = {\r\n      ...formData,\r\n      id: program ? program.id : Date.now().toString()\r\n    };\r\n    onSave(programData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-lg shadow-md border\">\r\n      <h2 className=\"text-2xl font-bold mb-6\">\r\n        {program ? 'Edit Program' : 'Add New Program'}\r\n      </h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Title *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Description *\r\n          </label>\r\n          <textarea\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            required\r\n            rows=\"4\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Image Upload\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={handleImageChange}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          {formData.image && (\r\n            <img\r\n              src={formData.image}\r\n              alt=\"Preview\"\r\n              className=\"mt-2 w-16 h-16 rounded-full object-cover\"\r\n            />\r\n          )}\r\n          <span className=\"text-sm text-gray-600\">Optional: Upload an image for the program</span>\r\n          {uploadingImage && <span className=\"text-sm text-blue-600 ml-2\">Uploading...</span>}\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Published\r\n          </label>\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"published\"\r\n            checked={formData.published}\r\n            onChange={handleCheckboxChange}\r\n            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\r\n          />\r\n          <span className=\"ml-2 text-sm text-gray-600\">Check to publish this program on the website</span>\r\n        </div>\r\n\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={uploadingImage}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\r\n          >\r\n            {uploadingImage ? 'Uploading...' : (program ? 'Update Program' : 'Add Program')}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className=\"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgramForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}