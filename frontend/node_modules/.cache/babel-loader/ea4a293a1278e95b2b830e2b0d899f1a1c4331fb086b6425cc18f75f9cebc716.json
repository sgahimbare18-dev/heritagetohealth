{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/Heritage to Health/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import ProjectList from'../components/ProjectList';import ProjectForm from'../components/ProjectForm';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminProjectsPage=()=>{const[projects,setProjects]=useState([]);const[editingProject,setEditingProject]=useState(null);const[showForm,setShowForm]=useState(false);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{// Check if admin is logged in\nconst isAdmin=localStorage.getItem('isAdmin');if(!isAdmin){navigate('/admin');return;}loadProjects();},[navigate]);const loadProjects=async()=>{try{setLoading(true);const response=await axios.get('http://localhost:5000/api/projects');setProjects(response.data);}catch(error){console.error('Error loading projects:',error);alert('Failed to load projects. Please try again.');}finally{setLoading(false);}};const handleSaveProject=async projectData=>{try{if(editingProject){// Update existing project\nawait axios.put(\"http://localhost:5000/api/projects/\".concat(editingProject._id),projectData);}else{// Create new project\nawait axios.post('http://localhost:5000/api/projects',projectData);}await loadProjects();// Reload projects\nsetEditingProject(null);setShowForm(false);}catch(error){console.error('Error saving project:',error);alert('Failed to save project. Please try again.');}};const handleEditProject=project=>{setEditingProject(project);setShowForm(true);};const handleDeleteProject=async id=>{if(window.confirm('Are you sure you want to delete this project?')){try{await axios.delete(\"http://localhost:5000/api/projects/\".concat(id));await loadProjects();// Reload projects\n}catch(error){console.error('Error deleting project:',error);alert('Failed to delete project. Please try again.');}}};const handleToggleProjectStatus=async id=>{try{const project=projects.find(p=>(p._id||p.id)===id);if(project){await axios.put(\"http://localhost:5000/api/projects/\".concat(id),_objectSpread(_objectSpread({},project),{},{published:!project.published}));await loadProjects();// Reload projects\n}}catch(error){console.error('Error toggling project status:',error);alert('Failed to update project status. Please try again.');}};const handleCancel=()=>{setEditingProject(null);setShowForm(false);};const handleAddProject=()=>{setEditingProject(null);setShowForm(true);};const handleLogout=()=>{localStorage.removeItem('isAdmin');navigate('/');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto p-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading projects...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/updates'),className:\"flex items-center text-blue-600 hover:text-blue-800 mb-4\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Back to Admin Dashboard\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold\",children:\"Admin Panel - Projects\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddProject,className:\"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Add Project\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/updates'),className:\"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700\",children:\"Manage Updates\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/programs'),className:\"px-6 py-2 bg-orange-600 text-white rounded hover:bg-orange-700\",children:\"Manage Programs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/testimonials'),className:\"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700\",children:\"Manage Testimonials\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700\",children:\"Logout\"})]})]}),showForm?/*#__PURE__*/_jsx(ProjectForm,{project:editingProject,onSave:handleSaveProject,onCancel:handleCancel}):/*#__PURE__*/_jsx(ProjectList,{projects:projects,isAdmin:true,onEdit:handleEditProject,onDelete:handleDeleteProject,onToggleStatus:handleToggleProjectStatus})]});};export default AdminProjectsPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ProjectList","ProjectForm","axios","jsx","_jsx","jsxs","_jsxs","AdminProjectsPage","projects","setProjects","editingProject","setEditingProject","showForm","setShowForm","loading","setLoading","navigate","isAdmin","localStorage","getItem","loadProjects","response","get","data","error","console","alert","handleSaveProject","projectData","put","concat","_id","post","handleEditProject","project","handleDeleteProject","id","window","confirm","delete","handleToggleProjectStatus","find","p","_objectSpread","published","handleCancel","handleAddProject","handleLogout","removeItem","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onSave","onCancel","onEdit","onDelete","onToggleStatus"],"sources":["C:/Users/Admin/Desktop/Heritage to Health/frontend/src/pages/AdminProjectsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProjectList from '../components/ProjectList';\r\nimport ProjectForm from '../components/ProjectForm';\r\nimport axios from 'axios';\r\n\r\nconst AdminProjectsPage = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [editingProject, setEditingProject] = useState(null);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Check if admin is logged in\r\n    const isAdmin = localStorage.getItem('isAdmin');\r\n    if (!isAdmin) {\r\n      navigate('/admin');\r\n      return;\r\n    }\r\n\r\n    loadProjects();\r\n  }, [navigate]);\r\n\r\n  const loadProjects = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get('http://localhost:5000/api/projects');\r\n      setProjects(response.data);\r\n    } catch (error) {\r\n      console.error('Error loading projects:', error);\r\n      alert('Failed to load projects. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveProject = async (projectData) => {\r\n    try {\r\n      if (editingProject) {\r\n        // Update existing project\r\n        await axios.put(`http://localhost:5000/api/projects/${editingProject._id}`, projectData);\r\n      } else {\r\n        // Create new project\r\n        await axios.post('http://localhost:5000/api/projects', projectData);\r\n      }\r\n      await loadProjects(); // Reload projects\r\n      setEditingProject(null);\r\n      setShowForm(false);\r\n    } catch (error) {\r\n      console.error('Error saving project:', error);\r\n      alert('Failed to save project. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleEditProject = (project) => {\r\n    setEditingProject(project);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDeleteProject = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this project?')) {\r\n      try {\r\n        await axios.delete(`http://localhost:5000/api/projects/${id}`);\r\n        await loadProjects(); // Reload projects\r\n      } catch (error) {\r\n        console.error('Error deleting project:', error);\r\n        alert('Failed to delete project. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleProjectStatus = async (id) => {\r\n    try {\r\n      const project = projects.find(p => (p._id || p.id) === id);\r\n      if (project) {\r\n        await axios.put(`http://localhost:5000/api/projects/${id}`, {\r\n          ...project,\r\n          published: !project.published\r\n        });\r\n        await loadProjects(); // Reload projects\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling project status:', error);\r\n      alert('Failed to update project status. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingProject(null);\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleAddProject = () => {\r\n    setEditingProject(null);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('isAdmin');\r\n    navigate('/');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-8\">\r\n        <div className=\"text-center\">Loading projects...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-8\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div>\r\n          <button\r\n            onClick={() => navigate('/admin/updates')}\r\n            className=\"flex items-center text-blue-600 hover:text-blue-800 mb-4\"\r\n          >\r\n            <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n            Back to Admin Dashboard\r\n          </button>\r\n          <h1 className=\"text-4xl font-bold\">Admin Panel - Projects</h1>\r\n        </div>\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            onClick={handleAddProject}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n          >\r\n            Add Project\r\n          </button>\r\n          <button\r\n            onClick={() => navigate('/admin/updates')}\r\n            className=\"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700\"\r\n          >\r\n            Manage Updates\r\n          </button>\r\n          <button\r\n            onClick={() => navigate('/admin/programs')}\r\n            className=\"px-6 py-2 bg-orange-600 text-white rounded hover:bg-orange-700\"\r\n          >\r\n            Manage Programs\r\n          </button>\r\n          <button\r\n            onClick={() => navigate('/admin/testimonials')}\r\n            className=\"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700\"\r\n          >\r\n            Manage Testimonials\r\n          </button>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showForm ? (\r\n        <ProjectForm\r\n          project={editingProject}\r\n          onSave={handleSaveProject}\r\n          onCancel={handleCancel}\r\n        />\r\n      ) : (\r\n        <ProjectList\r\n          projects={projects}\r\n          isAdmin={true}\r\n          onEdit={handleEditProject}\r\n          onDelete={handleDeleteProject}\r\n          onToggleStatus={handleToggleProjectStatus}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminProjectsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}